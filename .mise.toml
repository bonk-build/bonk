# Copyright Â© 2025 Colden Cullen
# SPDX-License-Identifier: MIT

[settings]
experimental = true
all_compile = false

[env]
CGO_ENABLED = 1
PRE_COMMIT_HOME = "{{ env.MISE_DATA_DIR | default(value=xdg_data_home ~ '/mise') }}/pre-commit-hooks"

[tools]
# Languages
go = "1.25.3"
python = "3.14.0"
pipx = "1.8.0"
# Development
buf = "1.59.0"
"ubi:vektra/mockery" = "3.5.5"
github-cli = "2.82.1"
pre-commit = "4.3.0"
golangci-lint = "2.6.0"
"ubi:korandoru/hawkeye" = "6.3.0"
"pipx:commitizen" = "4.9.1"
# Docs
"pipx:mkdocs" = { version = "1.6.1", pipx_args = "--system-site-packages" }

[tasks]
generate.run = "go generate ./..."
build.run = "go build ./..."
test.run = "go test ./... -race -count 100 -parallel 8"
lint.run = ["golangci-lint fmt", "golangci-lint run", "hawkeye format"]

[hooks]
postinstall = [
  # mkdocs dependencies
  "pip install pymdown-extensions mkdocs-material",
  "gh extension install nektos/gh-act",
  "gh extension install seachicken/gh-poi",
]
