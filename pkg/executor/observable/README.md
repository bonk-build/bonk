<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# observable

```go
import "go.bonk.build/pkg/executor/observable"
```

Package observable provides an executor which alerts followers to task status

## Index

- [Variables](<#variables>)
- [type Observable](<#Observable>)
  - [func New\(exec executor.Executor\) Observable](<#New>)
- [type Observer](<#Observer>)
- [type TaskStatus](<#TaskStatus>)
- [type TaskStatusMsg](<#TaskStatusMsg>)
  - [func TaskFinishedMsg\(id task.ID, err error\) TaskStatusMsg](<#TaskFinishedMsg>)
  - [func TaskRunningMsg\(id task.ID\) TaskStatusMsg](<#TaskRunningMsg>)


## Variables

<a name="ErrUnopenedSession"></a>

```go
var ErrUnopenedSession = errors.New("task being executed for unopened session")
```

<a name="Observable"></a>
## type [Observable](<observer.go#L19-L23>)



```go
type Observable interface {
    executor.Executor

    Listen(f Observer) error
}
```

<a name="New"></a>
### func [New](<observer.go#L27>)

```go
func New(exec executor.Executor) Observable
```



<a name="Observer"></a>
## type [Observer](<observer.go#L17>)



```go
type Observer = func(TaskStatusMsg)
```

<a name="TaskStatus"></a>
## type [TaskStatus](<messages.go#L9>)

TaskStatus describes the current status of a task.

```go
type TaskStatus int
```

<a name="StatusNone"></a>

```go
const (
    // StatusNone means that the task is unknown. [Observable] will never emit this status.
    StatusNone TaskStatus = iota
    // StatusRunning means that the task has begun executing.
    StatusRunning
    // StatusSuccess means the task has completed successfully.
    StatusSuccess
    // StatusError means the task has returned an error.
    StatusError
)
```

<a name="TaskStatusMsg"></a>
## type [TaskStatusMsg](<messages.go#L23-L31>)

TaskStatusMsg signifies a task's change in status.

```go
type TaskStatusMsg struct {
    // TaskID is the task that this event is referring to.
    TaskID task.ID
    // Status is the new status for the task.
    Status TaskStatus

    // If Status == [StatusError], this will contain the error message returned from the executor chain.
    Error error
}
```

<a name="TaskFinishedMsg"></a>
### func [TaskFinishedMsg](<messages.go#L43>)

```go
func TaskFinishedMsg(id task.ID, err error) TaskStatusMsg
```

TaskFinishedMsg creates a [TaskStatusMsg](<#TaskStatusMsg>) for a task that has finished executing. Status is set to either [StatusSuccess](<#StatusNone>) or [StatusError](<#StatusNone>) \(in which case Error is also set\).

<a name="TaskRunningMsg"></a>
### func [TaskRunningMsg](<messages.go#L34>)

```go
func TaskRunningMsg(id task.ID) TaskStatusMsg
```

TaskRunningMsg creates a [TaskStatusMsg](<#TaskStatusMsg>) for a task with [StatusRunning](<#StatusNone>).

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
