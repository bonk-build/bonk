<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# bonk

```go
import "go.bonk.build/api/go"
```

## Index

- [Variables](<#variables>)
- [func AddFollowUp\[Params any\]\(ctx context.Context, executor string, task TaskParams\[Params\]\)](<#AddFollowUp>)
- [func AddOutputs\(ctx context.Context, outputs ...string\)](<#AddOutputs>)
- [func Serve\(executors ...BonkExecutor\)](<#Serve>)
- [type BonkExecutor](<#BonkExecutor>)
  - [func NewExecutor\[Params any\]\(name string, exec func\(context.Context, \*TaskParams\[Params\]\) error\) BonkExecutor](<#NewExecutor>)
- [type ExecutorServer](<#ExecutorServer>)
  - [func \(p \*ExecutorServer\) GRPCClient\(\_ context.Context, \_ \*goplugin.GRPCBroker, c \*grpc.ClientConn\) \(any, error\)](<#ExecutorServer.GRPCClient>)
  - [func \(p \*ExecutorServer\) GRPCServer\(\_ \*goplugin.GRPCBroker, s \*grpc.Server\) error](<#ExecutorServer.GRPCServer>)
- [type LogStreamingServer](<#LogStreamingServer>)
  - [func \(p \*LogStreamingServer\) GRPCClient\(\_ context.Context, \_ \*goplugin.GRPCBroker, c \*grpc.ClientConn\) \(any, error\)](<#LogStreamingServer.GRPCClient>)
  - [func \(p \*LogStreamingServer\) GRPCServer\(\_ \*goplugin.GRPCBroker, s \*grpc.Server\) error](<#LogStreamingServer.GRPCServer>)
- [type TaskParams](<#TaskParams>)


## Variables

<a name="Handshake"></a>

```go
var Handshake = goplugin.HandshakeConfig{
    ProtocolVersion:  0,
    MagicCookieKey:   "BONK_PLUGIN",
    MagicCookieValue: "bonk the builder",
}
```

<a name="AddFollowUp"></a>
## func [AddFollowUp](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/executor.go#L83>)

```go
func AddFollowUp[Params any](ctx context.Context, executor string, task TaskParams[Params])
```



<a name="AddOutputs"></a>
## func [AddOutputs](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/executor.go#L76>)

```go
func AddOutputs(ctx context.Context, outputs ...string)
```



<a name="Serve"></a>
## func [Serve](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/plugin.go#L15>)

```go
func Serve(executors ...BonkExecutor)
```

Call from main\(\) to start the plugin gRPC server.

<a name="BonkExecutor"></a>
## type [BonkExecutor](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/executor.go#L40-L45>)

Represents a executor capable of performing tasks.

```go
type BonkExecutor struct {
    Name         string
    Outputs      []string
    ParamsSchema cue.Value
    Exec         func(context.Context, TaskParams[cue.Value]) error
}
```

<a name="NewExecutor"></a>
### func [NewExecutor](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/executor.go#L48-L51>)

```go
func NewExecutor[Params any](name string, exec func(context.Context, *TaskParams[Params]) error) BonkExecutor
```

Factory to create a new task executor.

<a name="ExecutorServer"></a>
## type [ExecutorServer](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/executor.go#L109-L114>)



```go
type ExecutorServer struct {
    goplugin.NetRPCUnsupportedPlugin
    goplugin.GRPCPlugin

    Executors map[string]BonkExecutor
}
```

<a name="ExecutorServer.GRPCClient"></a>
### func \(\*ExecutorServer\) [GRPCClient](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/executor.go#L125-L129>)

```go
func (p *ExecutorServer) GRPCClient(_ context.Context, _ *goplugin.GRPCBroker, c *grpc.ClientConn) (any, error)
```



<a name="ExecutorServer.GRPCServer"></a>
### func \(\*ExecutorServer\) [GRPCServer](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/executor.go#L116>)

```go
func (p *ExecutorServer) GRPCServer(_ *goplugin.GRPCBroker, s *grpc.Server) error
```



<a name="LogStreamingServer"></a>
## type [LogStreamingServer](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/log_streaming.go#L172-L175>)



```go
type LogStreamingServer struct {
    goplugin.NetRPCUnsupportedPlugin
    goplugin.GRPCPlugin
}
```

<a name="LogStreamingServer.GRPCClient"></a>
### func \(\*LogStreamingServer\) [GRPCClient](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/log_streaming.go#L183-L187>)

```go
func (p *LogStreamingServer) GRPCClient(_ context.Context, _ *goplugin.GRPCBroker, c *grpc.ClientConn) (any, error)
```



<a name="LogStreamingServer.GRPCServer"></a>
### func \(\*LogStreamingServer\) [GRPCServer](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/log_streaming.go#L177>)

```go
func (p *LogStreamingServer) GRPCServer(_ *goplugin.GRPCBroker, s *grpc.Server) error
```



<a name="TaskParams"></a>
## type [TaskParams](<https://github.com/bonk-build/bonk/blob/f645e87/api/go/executor.go#L33-L37>)

The inputs passed to a task executor.

```go
type TaskParams[Params any] struct {
    Inputs []string
    Params Params
    OutDir string
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
